var $break={};module('Enumerable',function(){var f=function(b){return b};def('each',function(a,c){var d=0;try{this.__each__(function(b){a.call(c,b,d++)})}catch(error){if(error!=$break){throw error;}}return this});def('all',function(c,d){c=c||f;var e=true;this.each(function(b,a){e=e&&!!c.call(d,b,a);if(!e){throw $break;}});return e});alias('every','all');def('any',function(c,d){c=c||f;var e=false;this.each(function(b,a){if(e=!!c.call(d,b,a)){throw $break;}});return e});alias('some','any');def('collect',function(d,e){d=d||f;return this.inject([],function(b,a,c){b.push(d.call(e,a,c));return b})});alias('map','collect');def('detect',function(c,d){var e=null;this.each(function(b,a){if(c.call(d,b,a)){e=b;throw $break;}});return e});alias('find','detect');def('include',function(a){if(typeof this.indexOf==='function'){return this.indexOf(a)!=-1}var c=false;this.each(function(b){if(b==a){c=true;throw $break;}});return c});def('inject',function(c,d,e){this.each(function(b,a){c=d.call(e,c,b,a)});return c});alias('reduce','inject');def('reject',function(d,e){return this.inject([],function(b,a,c){if(!d.call(e,a,c)){b.push(a)}return b})});alias('not','reject');def('select',function(d,e){return this.inject([],function(b,a,c){if(d.call(e,a,c)){b.push(a)}return b})});alias('findAll','select');alias('filter','select')});classify(Array,function(){include(Enumerable);if(typeof Array.prototype.forEach==='undefined'){def('__each__',function(b){for(var a=0,c=this.length;a<c;a++){b.call(null,this[a])}})}else{alias('__each__','forEach')}if(typeof Array.prototype.indexOf==='undefined'){def('indexOf',function(b){for(var a=0,c=this.length;a<c;a++){if(this[a]===b){return a}}return-1})}if(typeof Array.prototype.lastIndexOf==='undefined'){def('lastIndexOf',function(b){var a=this.length;while(a--){if(this[a]===b){return a}}return-1})}def('clear',function(){this.length=0;return this});def('first',function(){return this[0]});def('last',function(){return this[this.length-1]});def('compact',function(){return this.reject(function(b){return b==null})});def('uniq',function(d){return this.inject([],function(b,a,c){if(c===0||(d?b.last()!=a:!b.include(a))){b.push(a)}return b})})});classify(Function,function(){def('bind',function(b){if(b==null){return this}var a=this;return function(){return a.apply(b,arguments)}})});classify(RegExp,function(){def(this,'escape',function(b){return String(b).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1')})});classify(String,function(){def('camelize',function(){return this.replace(/[-_]+(.)?/g,function(b,a){return a?a.toUpperCase():''})});def('capitalize',function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()});def('dasherize',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1-$2').replace(/([a-z\d])([A-Z])/g,'$1-$2').replace(/_/g,'-').toLowerCase()});def('humanize',function(){return this.replace(/[_|-]+/g,' ').capitalize()});def('titleize',function(){return this.underscore().humanize().replace(/\b('?[a-z])/g,function(b,a){return a.capitalize()})});alias('toTitleCase','titleize');def('underscore',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\d])([A-Z])/g,'$1_$2').replace(/-/g,"_").toLowerCase()})});