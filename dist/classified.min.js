//--------------------------------------------------------------------------
//
//  Classified.js v0.5.4
//  http://github.com/petebrowne/classify
//
//  Copyright (c) 2010, Peter Browne
//
//  Dependencies:
//  - classify  0.10.7  http://github.com/petebrowne/classify
//
//--------------------------------------------------------------------------
(function(){var j=this,d=j.def,l=j.classify,m=j.module,o=j.include,p=j.extend,g=j.alias,i=j.$break={};p(Object,function(){var k=Object.prototype.toString;function n(a,b){return b}d('isUndefined',function(a){return typeof a==='undefined'});d('isDefined',function(a){return!Object.isUndefined(a)});d('isObject',function(a){if(a==null)return false;return k.call(a)==='[object Object]'});d('isFunction',function(a){return k.call(a)==='[object Function]'});d('isString',function(a){return k.call(a)==='[object String]'});d('isNumber',function(a){return k.call(a)==='[object Number]'});d('isDate',function(a){return k.call(a)==='[object Date]'});d('isRegExp',function(a){return k.call(a)==='[object RegExp]'});if(Object.isFunction(Array.isArray)){d('isArray',Array.isArray)}else{d('isArray',function(a){return k.call(a)==='[object Array]'})}d('extend',function(a,b){for(var c in b){a[c]=b[c]}return a});g('merge','extend');d('clone',function(a){return this.extend({},a)});d('each',function(a,b,c){try{for(var e in a){if(a.hasOwnProperty(e)){b.call(c,e,a[e])}}}catch(error){if(error!==i)throw error;}});d('all',function(c,e,f){e=e||n;var h=true;Object.each(c,function(a,b){if(!e.call(f,a,b)){h=false;throw i;}});return h});g('every','all');d('any',function(c,e,f){e=e||n;var h=false;Object.each(c,function(a,b){if(h=!!e.call(f,a,b))throw i;});return h});g('some','any');d('include',function(c,e){return Object.any(c,function(a,b){return b===e})});g('contains','include');if(!Object.isFunction(Object.keys)){d('keys',function(c){if(!Object.isObject(c))throw new TypeError();var e=[];Object.each(c,function(a,b){e.push(a)});return e})}d('values',function(c){var e=[];Object.each(c,function(a,b){e.push(b)});return e})});m('Enumerable',function(){function h(a){return a}d('each',function(b,c){var e=0;try{this.__each__(function(a){b.call(c,a,e++)})}catch(error){if(error!=i)throw error;}return this});d('all',function(c,e){c=c||h;var f=true;this.each(function(a,b){if(!c.call(e,a,b)){f=false;throw i;}});return f});g('every','all');d('any',function(c,e){c=c||h;var f=false;this.each(function(a,b){if(f=!!c.call(e,a,b))throw i;});return f});g('some','any');d('collect',function(e,f){e=e||h;return this.inject([],function(a,b,c){a.push(e.call(f,b,c));return a})});g('map','collect');d('detect',function(c,e){var f=null;this.each(function(a,b){if(c.call(e,a,b)){f=a;throw i;}});return f});g('find','detect');d('include',function(b){if(Object.isFunction(this.indexOf)){return this.indexOf(b)!=-1}var c=false;this.each(function(a){if(c=(a==b))throw i;});return c});g('contains','include');d('inject',function(c,e,f){this.each(function(a,b){c=e.call(f,c,a,b)});return c});g('reduce','inject');d('invoke',function(b){var c=Array.slice(arguments,1);return this.map(function(a){return a[b].apply(a,c)})});d('pluck',function(b){return this.map(function(a){return a[b]})});d('reject',function(e,f){return this.inject([],function(a,b,c){if(!e.call(f,b,c)){a.push(b)}return a})});g('not','reject');d('select',function(e,f){return this.inject([],function(a,b,c){if(e.call(f,b,c)){a.push(b)}return a})});g('findAll','select');g('filter','select')});m('Events',function(){d('bind',function(a,b){var c=this.__events__||(this.__events__={}),e=c[a]||(c[a]=[]);e.push(b);return this});d('unbind',function(a,b){var c,e;if(!a){delete this.__events__}else if(c=this.__events__){if(!b){delete c[a]}else if(e=c[a]){for(var f=0,h=e.length;f<h;f++){if(e[f]===b){e.splice(f,1);break}}}}return this});d('trigger',function(b){var c;if(c=this.__events__){var e=arguments,f;if(f=c[b]){f.each(function(a){a.apply(this,Array.slice(e,1))},this)}if(f=c['all']){f.each(function(a){a.apply(this,e)},this)}}return this})});m('Inflector',function(){this.plurals=[];this.singulars=[];this.uncountables=[];d('plural',function(a,b){if(!Object.isRegExp(a))a=new RegExp(a+'$');Inflector.plurals.unshift([a,b])});d('singular',function(a,b){if(!Object.isRegExp(a))a=new RegExp(a+'$');Inflector.singulars.unshift([a,b])});d('irregular',function(a,b){Inflector.plural(new RegExp('('+a.charAt(0)+')'+a.slice(1)+'$','i'),'$1'+b.slice(1));Inflector.singular(new RegExp('('+b.charAt(0)+')'+b.slice(1)+'$','i'),'$1'+a.slice(1))});d('uncountable',function(){Inflector.uncountables=Inflector.uncountables.concat(Array.slice(arguments))});d('pluralize',function(b){var c=b.split(/\s/).pop();if(Inflector.uncountables.contains(c.toLowerCase())){return b}var e=Inflector.plurals.find(function(a){return a[0].test(c)});if(e)return b.replace(e[0],e[1]);return b});d('singularize',function(b){var c=b.split(/\s/).pop();if(Inflector.uncountables.contains(c.toLowerCase())){return b}var e=Inflector.singulars.find(function(a){return a[0].test(c)});if(e)return b.replace(e[0],e[1]);return b})});l(Array,function(){o(Enumerable);d(this,'slice',function(a,b,c){return Array.prototype.slice.call(a,b,c)});d('__each__',function(a){for(var b=0,c=this.length;b<c;b++){a.call(null,this[b])}});d('clear',function(){this.length=0;return this});d('clone',function(){return Array.slice(this,0)});d('compact',function(){return this.reject(function(a){return a==null})});d('first',function(){return this[0]});d('flatten',function(){return this.inject([],function(a,b){if(Object.isArray(b)){a=a.concat(b.flatten())}else{a.push(b)}return a})});d('isBlank',function(){return this.compact().length==0});d('isEmpty',function(){return this.length==0});if(!Object.isFunction(Array.prototype.indexOf)){d('indexOf',function(a,b){for(var c=b||0,e=this.length;c<e;c++){if(this[c]===a){return c}}return-1})}d('last',function(){return this[this.length-1]});if(!Object.isFunction(Array.prototype.lastIndexOf)){d('lastIndexOf',function(a){var b=this.length;while(b--){if(this[b]===a){return b}}return-1})}d('remove',function(a){var b=this.indexOf(a);if(b!=-1){this.splice(b,1);return a}});d('removeAll',function(a){var b=false;while(Object.isDefined(this.remove(a))){b=true}if(b)return a});d('removeAt',function(a){if(a>0&&a<this.length){return this.splice(a,1)[0]}});d('uniq',function(e){return this.inject([],function(a,b,c){if(c===0||(e?a.last()!=b:!a.include(b))){a.push(b)}return a})})});l(Function,function(){d('bind',function(a){if(arguments.length<2&&a==null){return this}var b=this,c=Array.slice(arguments,1);return function(){return b.apply(a,c.concat(Array.slice(arguments)))}});d('curry',function(){if(!arguments.length)return this;var a=this,b=Array.slice(arguments);return function(){return a.apply(null,b.concat(Array.slice(arguments)))}});d('delay',function(a){var b=this,c=Array.slice(arguments,1);if(a<=0){return b.apply(null,c)}else{return this.__timeoutID__=setTimeout(function(){return b.apply(null,c)},a*1000)}});d('defer',function(){return this.delay.apply(this,[0.01].concat(Array.slice(arguments)))});d('periodical',function(a){var b=this,c=Array.slice(arguments,1);return this.__intervalID__=setInterval(function(){return b.apply(null,c)},a*1000)});d('stop',function(){clearTimeout(this.__timeoutID__);clearInterval(this.__intervalID__)})});l(Number,function(){d('times',function(a,b){for(var c=0;c<this;c++){a.call(b,c)}return this});(function(b){b.each(function(a){d(a,function(){return Math[a].apply(null,[this].concat(Array.slice(arguments)))})})})('abs acos asin atan atan2 ceil cos exp floor log max min pow round sin sqrt tan'.split(' '))});l(RegExp,function(){d(this,'escape',function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1')})});l(String,function(){d('endsWith',function(a){var b=this.length-a.length;return b>=0&&this.indexOf(a,b)===b});d('include',function(a){return this.indexOf(a)>-1});g('contains','include');d('isBlank',function(){return/^\s*$/.test(this)});d('isEmpty',function(){return this==''});d('startsWith',function(a){return this.lastIndexOf(a,0)===0});d('strip',function(){return this.replace(/^\s+/,'').replace(/\s+$/,'')});d('camelize',function(){return this.replace(/[-_]+(.)?/g,function(a,b){return b?b.toUpperCase():''})});d('capitalize',function(){return this.charAt(0).toUpperCase()+this.substring(1)});d('constantize',function(){var b=this.split('.'),c=j;b.each(function(a){c=c[a];if(Object.isUndefined(c))throw i;});return c});d('dasherize',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1-$2').replace(/([a-z\d])([A-Z])/g,'$1-$2').replace(/_/g,'-').toLowerCase()});d('humanize',function(){return this.replace(/[-_]+/g,' ').capitalize()});d('pluralize',function(){return Inflector.pluralize(this)});d('singularize',function(){return Inflector.singularize(this)});d('titleize',function(){return this.underscore().humanize().replace(/\b('?[a-z])/g,function(a,b){return b.capitalize()})});g('toTitleCase','titleize');d('underscore',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\d])([A-Z])/g,'$1_$2').replace(/-/g,'_').toLowerCase()})});(function(a,b,c){a(/$/,'s');a(/s$/i,'s');a(/(ax|test)is$/i,'$1es');a(/(octop|vir)us$/i,'$1i');a(/(alias|status)$/i,'$1es');a(/(bu)s$/i,'$1ses');a(/(buffal|tomat)o$/i,'$1oes');a(/([ti])um$/i,'$1a');a(/sis$/i,'ses');a(/(?:([^f])fe|([lr])f)$/i,'$1$2ves');a(/(hive)$/i,'$1s');a(/([^aeiouy]|qu)y$/i,'$1ies');a(/(x|ch|ss|sh)$/i,'$1es');a(/(matr|vert|ind)(?:ix|ex)$/i,'$1ices');a(/([m|l])ouse$/i,'$1ice');a(/^(ox)$/i,'$1en');a(/(quiz)$/i,'$1zes');b(/s$/i,'');b(/(n)ews$/i,'$1ews');b(/([ti])a$/i,'$1um');b(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,'$1$2sis');b(/(^analy)ses$/i,'$1sis');b(/([^f])ves$/i,'$1fe');b(/(hive)s$/i,'$1');b(/(tive)s$/i,'$1');b(/([lr])ves$/i,'$1f');b(/([^aeiouy]|qu)ies$/i,'$1y');b(/(s)eries$/i,'$1eries');b(/(m)ovies$/i,'$1ovie');b(/(x|ch|ss|sh)es$/i,'$1');b(/([m|l])ice$/i,'$1ouse');b(/(bus)es$/i,'$1');b(/(o)es$/i,'$1');b(/(shoe)s$/i,'$1');b(/(cris|ax|test)es$/i,'$1is');b(/(octop|vir)i$/i,'$1us');b(/(alias|status)es$/i,'$1');b(/^(ox)en/i,'$1');b(/(vert|ind)ices$/i,'$1ex');b(/(matr)ices$/i,'$1ix');b(/(quiz)zes$/i,'$1');b(/(database)s$/i,'$1');c('person','people');c('man','men');c('child','children');c('sex','sexes');c('move','moves');c('cow','kine');Inflector.uncountable('equipment','information','rice','money','species','series','fish','sheep')})(Inflector.plural,Inflector.singular,Inflector.irregular)})();