//--------------------------------------------------------------------------
//
//  Classified.js v0.3.0
//  http://github.com/petebrowne/classify
//
//  Copyright (c) 2010, Peter Browne
//
//  Dependencies:
//  - classify  0.10.4  http://github.com/petebrowne/classify
//
//--------------------------------------------------------------------------
(function(){var k='undefined',h=this,c=h.def,i=h.classify,n=h.module,m=h.include,o=h.extend,g=h.alias,j=h.$break={};n('Enumerable',function(){var l=function(a){return a};c('each',function(b,d){var e=0;try{this.__each__(function(a){b.call(d,a,e++)})}catch(error){if(error!=j){throw error;}}return this});c('all',function(d,e){d=d||l;var f=true;this.each(function(a,b){f=f&&!!d.call(e,a,b);if(!f){throw j;}});return f});g('every','all');c('any',function(d,e){d=d||l;var f=false;this.each(function(a,b){if(f=!!d.call(e,a,b)){throw j;}});return f});g('some','any');c('collect',function(e,f){e=e||l;return this.inject([],function(a,b,d){a.push(e.call(f,b,d));return a})});g('map','collect');c('detect',function(d,e){var f=null;this.each(function(a,b){if(d.call(e,a,b)){f=a;throw j;}});return f});g('find','detect');c('include',function(b){if(typeof this.indexOf==='function'){return this.indexOf(b)!=-1}var d=false;this.each(function(a){if(typeof a.value!==k){a=a.value}if(a==b){d=true;throw j;}});return d});c('inject',function(d,e,f){this.each(function(a,b){d=e.call(f,d,a,b)});return d});g('reduce','inject');c('reject',function(e,f){return this.inject([],function(a,b,d){if(!e.call(f,b,d)){a.push(b)}return a})});g('not','reject');c('select',function(e,f){return this.inject([],function(a,b,d){if(e.call(f,b,d)){a.push(b)}return a})});g('findAll','select');g('filter','select')});i(Array,function(){m(Enumerable);c('__each__',function(a){for(var b=0,d=this.length;b<d;b++){a.call(null,this[b])}});if(typeof Array.prototype.indexOf===k){c('indexOf',function(a){for(var b=0,d=this.length;b<d;b++){if(this[b]===a){return b}}return-1})}if(typeof Array.prototype.lastIndexOf===k){c('lastIndexOf',function(a){var b=this.length;while(b--){if(this[b]===a){return b}}return-1})}c('clear',function(){this.length=0;return this});c('first',function(){return this[0]});c('last',function(){return this[this.length-1]});c('compact',function(){return this.reject(function(a){return a==null})});c('uniq',function(e){return this.inject([],function(a,b,d){if(d===0||(e?a.last()!=b:!a.include(b))){a.push(b)}return a})})});i(Function,function(){c('bind',function(a){if(a==null){return this}var b=this;return function(){return b.apply(a,arguments)}})});i(Number,function(){c('abs',function(){return Math.abs(this)});c('ceil',function(){return Math.ceil(this)});c('floor',function(){return Math.floor(this)});c('round',function(){return Math.round(this)})});o(Object,function(){c('extend',function(a,b){for(var d in b){a[d]=b[d]}return a})});i(RegExp,function(){c(this,'escape',function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1')})});i(String,function(){c('endsWith',function(a){var b=this.length-a.length;return b>=0&&this.indexOf(a,b)===b});c('include',function(a){return this.indexOf(a)>-1});c('isBlank',function(){return/^\s*$/.test(this)});c('isEmpty',function(){return this==''});c('startsWith',function(a){return this.lastIndexOf(a,0)===0});c('strip',function(){return this.replace(/^\s+/,'').replace(/\s+$/,'')});c('camelize',function(){return this.replace(/[-_]+(.)?/g,function(a,b){return b?b.toUpperCase():''})});c('capitalize',function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()});c('dasherize',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1-$2').replace(/([a-z\d])([A-Z])/g,'$1-$2').replace(/_/g,'-').toLowerCase()});c('humanize',function(){return this.replace(/[_|-]+/g,' ').capitalize()});c('titleize',function(){return this.underscore().humanize().replace(/\b('?[a-z])/g,function(a,b){return b.capitalize()})});g('toTitleCase','titleize');c('underscore',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\d])([A-Z])/g,'$1_$2').replace(/-/g,'_').toLowerCase()})});i('Hash',function(){m(Enumerable);c('initialize',function(a){this.update(a)});c('__each__',function(a){for(var b in this){if(this.hasOwnProperty(b)){var d=this[b];var e=[b,d];e.key=b;e.value=d;a.call(null,e)}}});c('keys',function(){return this.collect(function(a){return a.key})});c('merge',function(a){return new Hash(this).update(a)});c('reverseMerge',function(a){return new Hash(a).update(this)});c('update',function(b){if(b instanceof Hash){b.each(function(a){this[a.key]=a.value},this)}else{Object.extend(this,b)}return this});c('values',function(){return this.collect(function(a){return a.value})})});c('$H',function(a){return new Hash(a)})})();