(function(o,h){var j=o,f=o,i=null,m=false;j.classify=function(b,a,c){var d,e,g;if(c===h){g=b;c=a}else{d=b;g=a}if(f[g]===h){f[g]=p(d)}i=f[g];k(i.prototype,c);i=null;return f[g]};j.def=function(b,a,c){var d,e;if(c===h){d=f;e=b;c=a}else{d=b;e=a}c=q(e,c);d[e]=c;return d[e]};j.module=function(b,a){if(f[b]===h){f[b]={}}k(f[b],a);return a};j.include=function(b,a){var c,d;if(a===h){a=b;c=(i)?i.prototype:f}else{d=b;c=f[d];if(c.prototype){c=c.prototype}}k(c,a)};j.extend=function(b,a){var c,d;if(a===h){if(i!==null){a=b;c=i}}else{d=b;c=f[d]}k(c,a)};j.alias=function(b,a){f[b]=f[a]};var p=function(b){var a=function(){if(!m&&this.initialize!==h){this.initialize.apply(this,arguments)}};if(b){m=true;a.prototype=new b();m=false}a.superclass=b;a.constructor=a;return a},k=function(b,a){if(b===h||a===h){return}var c=f;f=b;if(typeof a==="function"){a.call(b)}else{for(var d in a){def(d,a[d])}}f=c},q=function(g,l){var n=i!==null&&i.superclass!==h&&i.superclass.prototype;if(n&&typeof l==="function"&&typeof n[g]==="function"&&r(l)){return function(){var c=arguments,d=this.callSuper;this.callSuper=function(){for(var b=0,a=arguments.length;b<a;b++){c[b]=arguments[b]}return n[g].apply(this,c)};var e=l.apply(this,arguments);this.callSuper=d;return e}}return l},r=function(b){return/\bcallSuper\b/.test(b.toString())}})(window);var $break={};module("Enumerable",function(){var g=function(b){return b};def("each",function(a,c){var d=0;try{this._each(function(b){a.call(c,b,d++)})}catch(error){if(error!=$break){throw error;}}return this});def("all",function(c,d){c=c||g;var e=true;this.each(function(b,a){e=e&&!!c.call(d,b,a);if(!e){throw $break;}});return e});alias("every","all");def("any",function(c,d){c=c||g;var e=false;this.each(function(b,a){if(e=!!c.call(d,b,a)){throw $break;}});return e});alias("some","any");def("collect",function(d,e){d=d||g;return this.inject([],function(b,a,c){b.push(d.call(e,a,c));return b})});alias("map","collect");def("detect",function(c,d){var e;this.each(function(b,a){if(c.call(d,b,a)){e=b;throw $break;}});return e});alias("find","detect");def("include",function(a){if(typeof this.indexOf==="function"){return this.indexOf(a)!=-1}var c=false;this.each(function(b){if(b==a){c=true;throw $break;}});return c});def("inject",function(c,d,e){this.each(function(b,a){c=d.call(e,c,b,a)});return c});def("reject",function(d,e){return this.inject([],function(b,a,c){if(!d.call(e,a,c)){b.push(a)}return b})});def("select",function(d,e){return this.inject([],function(b,a,c){if(d.call(e,a,c)){b.push(a)}return b})});alias("findAll","select")});module("Inflector",function(){def("camelize",function(){return this.replace(/-+(.)?/g,function(b,a){return a?a.toUpperCase():""})});def("capitalize",function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()})});classify("Array",function(){include(Enumerable);if(Array.prototype.forEach){alias("_each","forEach")}else{def("_each",function(b){for(var a=0,c=this.length;a<c;a++){b.call(null,this[a])}})}if(!Array.prototype.indexOf){def("indexOf",function(b){for(var a=0,c=array.length;a<c;a++){if(array[a]===b){return a}}return-1})}if(!Array.prototype.lastIndexOf){def("lastIndexOf",function(b){var a=array.length;while(a--){if(array[a]===b){return a}}return-1})}def("clear",function(){this.length=0;return this});def("first",function(){return this[0]});def("last",function(){return this[this.length-1]});def("compact",function(){return this.reject(function(b){return b==null})});def("uniq",function(d){return this.inject([],function(b,a,c){if(c===0||(d?b.last()!=a:!b.include(a))){b.push(a)}return b})})});classify("Function",function(){def("bind",function(b){if(b===undefined){return this}var a=this;return function(){return a.apply(b,arguments)}})});classify("String",function(){include(Inflector)});