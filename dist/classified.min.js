//--------------------------------------------------------------------------
//
//  Classified.js v0.4.0
//  http://github.com/petebrowne/classify
//
//  Copyright (c) 2010, Peter Browne
//
//  Dependencies:
//  - classify  0.10.4  http://github.com/petebrowne/classify
//
//--------------------------------------------------------------------------
(function(){var l='undefined',h=this,d=h.def,i=h.classify,m=h.module,n=h.include,o=h.extend,g=h.alias,p=Array.prototype.slice,j=h.$break={};m('Enumerable',function(){var k=function(a){return a};d('each',function(b,c){var e=0;try{this.__each__(function(a){b.call(c,a,e++)})}catch(error){if(error!=j){throw error;}}return this});d('all',function(c,e){c=c||k;var f=true;this.each(function(a,b){f=f&&!!c.call(e,a,b);if(!f){throw j;}});return f});g('every','all');d('any',function(c,e){c=c||k;var f=false;this.each(function(a,b){if(f=!!c.call(e,a,b)){throw j;}});return f});g('some','any');d('collect',function(e,f){e=e||k;return this.inject([],function(a,b,c){a.push(e.call(f,b,c));return a})});g('map','collect');d('detect',function(c,e){var f=null;this.each(function(a,b){if(c.call(e,a,b)){f=a;throw j;}});return f});g('find','detect');d('include',function(b){if(typeof this.indexOf==='function'){return this.indexOf(b)!=-1}var c=false;this.each(function(a){if(typeof a.value!==l){a=a.value}if(a==b){c=true;throw j;}});return c});g('contains','include');d('inject',function(c,e,f){this.each(function(a,b){c=e.call(f,c,a,b)});return c});g('reduce','inject');d('reject',function(e,f){return this.inject([],function(a,b,c){if(!e.call(f,b,c)){a.push(b)}return a})});g('not','reject');d('select',function(e,f){return this.inject([],function(a,b,c){if(e.call(f,b,c)){a.push(b)}return a})});g('findAll','select');g('filter','select')});m('Events',function(){d('bind',function(a,b){var c=this.__events__||(this.__events__={}),e=c[a]||(c[a]=[]);e.push(b);return this});d('unbind',function(a,b){var c,e;if(!a){delete this.__events__}else if(c=this.__events__){if(!b){delete c[a]}else if(e=c[a]){for(var f=0,k=e.length;f<k;f++){if(e[f]===b){e.splice(f,1);break}}}}return this});d('trigger',function(b){var c;if(c=this.__events__){var e=arguments,f;if(f=c[b]){f.each(function(a){a.apply(this,p.call(e,1))},this)}if(f=c['all']){f.each(function(a){a.apply(this,e)},this)}}return this})});i(Array,function(){n(Enumerable);d('__each__',function(a){for(var b=0,c=this.length;b<c;b++){a.call(null,this[b])}});if(typeof Array.prototype.indexOf===l){d('indexOf',function(a,b){for(var c=b||0,e=this.length;c<e;c++){if(this[c]===a){return c}}return-1})}if(typeof Array.prototype.lastIndexOf===l){d('lastIndexOf',function(a){var b=this.length;while(b--){if(this[b]===a){return b}}return-1})}d('clear',function(){this.length=0;return this});d('first',function(){return this[0]});d('last',function(){return this[this.length-1]});d('isEmpty',function(){return this.length==0});d('isBlank',function(){return this.compact().length==0});d('removeAt',function(a){if(a>0&&a<this.length){return this.splice(a,1)[0]}});d('remove',function(a){var b=this.indexOf(a);if(b!=-1){this.splice(b,1);return a}});d('removeAll',function(a){var b=false;while(typeof this.remove(a)!==l){b=true}if(b)return a});d('compact',function(){return this.reject(function(a){return a==null})});d('uniq',function(e){return this.inject([],function(a,b,c){if(c===0||(e?a.last()!=b:!a.include(b))){a.push(b)}return a})})});i(Function,function(){d('bind',function(a){if(a==null){return this}var b=this;return function(){return b.apply(a,arguments)}})});i(Number,function(){d('abs',function(){return Math.abs(this)});d('round',function(){return Math.round(this)});d('ceil',function(){return Math.ceil(this)});d('floor',function(){return Math.floor(this)})});o(Object,function(){d('extend',function(a,b){for(var c in b){a[c]=b[c]}return a});d('clone',function(a){return this.extend({},a)})});i(RegExp,function(){d(this,'escape',function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1')})});i(String,function(){d('endsWith',function(a){var b=this.length-a.length;return b>=0&&this.indexOf(a,b)===b});d('include',function(a){return this.indexOf(a)>-1});g('contains','include');d('isBlank',function(){return/^\s*$/.test(this)});d('isEmpty',function(){return this==''});d('startsWith',function(a){return this.lastIndexOf(a,0)===0});d('strip',function(){return this.replace(/^\s+/,'').replace(/\s+$/,'')});d('camelize',function(){return this.replace(/[-_]+(.)?/g,function(a,b){return b?b.toUpperCase():''})});d('capitalize',function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()});d('dasherize',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1-$2').replace(/([a-z\d])([A-Z])/g,'$1-$2').replace(/_/g,'-').toLowerCase()});d('humanize',function(){return this.replace(/[_|-]+/g,' ').capitalize()});d('titleize',function(){return this.underscore().humanize().replace(/\b('?[a-z])/g,function(a,b){return b.capitalize()})});g('toTitleCase','titleize');d('underscore',function(){return this.replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\d])([A-Z])/g,'$1_$2').replace(/-/g,'_').toLowerCase()})})})();