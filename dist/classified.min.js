(function(o,h){var j=o,f=o,i=null,m=false;j.classify=function(a,b,c){var d,e,g;if(c===h){g=a;c=b}else{d=a;g=b}if(f[g]===h){f[g]=p(d)}i=f[g];k(i.prototype,c);i=null;return f[g]};j.def=function(a,b,c){var d,e;if(c===h){d=f;e=a;c=b}else{d=a;e=b}c=q(e,c);d[e]=c;return d[e]};j.module=function(a,b){if(f[a]===h){f[a]={}}k(f[a],b);return b};j.include=function(a,b){var c,d;if(b===h){b=a;c=(i)?i.prototype:f}else{d=a;c=f[d];if(c.prototype){c=c.prototype}}k(c,b)};j.extend=function(a,b){var c,d;if(b===h){if(i!==null){b=a;c=i}}else{d=a;c=f[d]}k(c,b)};j.alias=function(a,b){f[a]=f[b]};var p=function(a){var b=function(){if(!m&&this.initialize!==h){this.initialize.apply(this,arguments)}};if(a){m=true;b.prototype=new a();m=false}b.superclass=a;b.constructor=b;return b},k=function(a,b){if(a===h||b===h){return}var c=f;f=a;if(typeof b==="function"){b.call(a)}else{for(var d in b){def(d,b[d])}}f=c},q=function(g,l){var n=i!==null&&i.superclass!==h&&i.superclass.prototype;if(n&&typeof l==="function"&&typeof n[g]==="function"&&r(l)){return function(){var c=arguments,d=this.callSuper;this.callSuper=function(){for(var a=0,b=arguments.length;a<b;a++){c[a]=arguments[a]}return n[g].apply(this,c)};var e=l.apply(this,arguments);this.callSuper=d;return e}}return l},r=function(a){return/\bcallSuper\b/.test(a.toString())}})(window);var $break={};module("Enumerable",function(){var g=function(a){return a};def("each",function(b,c){var d=0;try{this._each(function(a){b.call(c,a,d++)})}catch(error){if(error!=$break){throw error;}}return this});def("all",function(c,d){c=c||g;var e=true;this.each(function(a,b){e=e&&!!c.call(d,a,b);if(!e){throw $break;}});return e});alias("every","all");def("any",function(c,d){c=c||g;var e=false;this.each(function(a,b){if(e=!!c.call(d,a,b)){throw $break;}});return e});alias("some","any");def("collect",function(d,e){d=d||g;return this.inject([],function(a,b,c){a.push(d.call(e,b,c));return a})});alias("map","collect");def("detect",function(c,d){var e;this.each(function(a,b){if(c.call(d,a,b)){e=a;throw $break;}});return e});alias("find","detect");def("include",function(b){if(typeof this.indexOf==="function"){return this.indexOf(b)!=-1}var c=false;this.each(function(a){if(a==b){c=true;throw $break;}});return c});def("inject",function(c,d,e){this.each(function(a,b){c=d.call(e,c,a,b)});return c});def("reject",function(d,e){return this.inject([],function(a,b,c){if(!d.call(e,b,c)){a.push(b)}return a})});def("select",function(d,e){return this.inject([],function(a,b,c){if(d.call(e,b,c)){a.push(b)}return a})});alias("findAll","select")});module("Inflector",function(){});classify("Array",function(){include(Enumerable);if(Array.prototype.forEach){alias("_each","forEach")}else{def("_each",function(a){for(var b=0,c=this.length;b<c;b++){a.call(null,this[b])}})}if(!Array.prototype.indexOf){def("indexOf",function(a){for(var b=0,c=array.length;b<c;b++){if(array[b]===a){return b}}return-1})}if(!Array.prototype.lastIndexOf){def("lastIndexOf",function(a){var b=array.length;while(b--){if(array[b]===a){return b}}return-1})}def("clear",function(){this.length=0;return this});def("first",function(){return this[0]});def("last",function(){return this[this.length-1]});def("compact",function(){return this.reject(function(a){return a==null})});def("uniq",function(d){return this.inject([],function(a,b,c){if(c===0||(d?a.last()!=b:!a.include(b))){a.push(b)}return a})})});classify("Function",function(){def("bind",function(a){if(a===undefined){return this}var b=this;return function(){return b.apply(a,arguments)}})});classify("String",function(){include(Inflector)});